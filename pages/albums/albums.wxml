<view class="albums-container">
  <!-- å·¦ä¾§åˆ†ç±»åˆ—è¡¨ -->
  <scroll-view class="category-sidebar" scroll-y>
    <view 
      class="category-item {{currentCategoryId === '' ? 'active' : ''}}"
      bindtap="onCategoryChange"
      data-id=""
    >
      <text class="category-name">å…¨éƒ¨</text>
      <text class="category-count">{{totalCount}}</text>
    </view>
    <view 
      class="category-item {{currentCategoryId === item._id ? 'active' : ''}}"
      wx:for="{{categories}}"
      wx:key="_id"
      bindtap="onCategoryChange"
      data-id="{{item._id}}"
      data-name="{{item.name}}"
    >
      <text class="category-name">{{item.name}}</text>
      <text class="category-count">{{item.albumCount || 0}}</text>
    </view>
  </scroll-view>

  <!-- å³ä¾§ä½œå“é›†åˆ—è¡¨ -->
  <scroll-view class="albums-content" scroll-y bindscrolltolower="onReachBottom">
    <view class="content-header">
      <text class="content-title">{{currentCategoryName || 'å…¨éƒ¨ä½œå“'}}</text>
      <text class="content-count">å…± {{albums.length}} ä¸ªä½œå“é›†</text>
    </view>

    <view class="albums-list" wx:if="{{albums.length > 0}}">
      <view 
        class="album-card"
        wx:for="{{albums}}"
        wx:key="_id"
        bindtap="goToAlbumDetail"
        data-id="{{item._id}}"
      >
        <image class="album-cover" src="{{item.coverImage}}" mode="aspectFill" lazy-load></image>
        <view class="album-overlay">
          <view class="album-title">{{item.title}}</view>
          <view class="album-desc">{{item.description}}</view>
          <view class="album-footer">
            <text class="album-category">{{item.categoryName}}</text>
            <text class="album-count">{{item.images.length}}å¼ </text>
          </view>
        </view>
      </view>
    </view>

    <view class="empty-container" wx:else>
      <view class="empty-icon">ğŸ“·</view>
      <view class="empty-text">è¯¥åˆ†ç±»æš‚æ— ä½œå“</view>
    </view>

    <!-- åŠ è½½æ›´å¤š -->
    <view class="load-more" wx:if="{{hasMore}}">
      <text>åŠ è½½æ›´å¤š...</text>
    </view>
    <view class="load-more" wx:elif="{{albums.length > 0}}">
      <text>å·²åŠ è½½å…¨éƒ¨</text>
    </view>
  </scroll-view>

  <!-- åŠ è½½çŠ¶æ€ -->
  <view class="loading-container" wx:if="{{loading}}">
    <text>åŠ è½½ä¸­...</text>
  </view>
  <view class="error-container" wx:if="{{!loading && loadError}}">
    <text>åŠ è½½å¤±è´¥</text>
    <button bindtap="onRetry">é‡è¯•</button>
  </view>
</view>
