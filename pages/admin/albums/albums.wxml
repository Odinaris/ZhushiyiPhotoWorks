<view class="admin-page">
  <!-- Loading Overlay -->
  <view class="loading-overlay {{isLoading ? 'show' : ''}}" wx:if="{{isLoading}}">
    <view class="loading-spinner"></view>
    <text class="loading-text">{{loadingText}}</text>
  </view>

  <view class="page-header">
    <view class="header-title">作品集管理</view>
    <button class="add-btn" bindtap="addAlbum">+ 添加作品集</button>
  </view>

  <!-- Category Tabs -->
  <view class="category-tabs" wx:if="{{categories.length > 0}}">
    <scroll-view 
      class="tabs-scroll" 
      scroll-x="{{true}}" 
      show-scrollbar="{{false}}"
      enable-flex="{{true}}"
    >
      <view class="tabs-list">
        <view 
          class="tab-item {{currentCategoryId === '' ? 'active' : ''}}"
          bindtap="selectCategory"
          data-id=""
        >
          全部
        </view>
        <view 
          class="tab-item {{currentCategoryId === item._id ? 'active' : ''}}"
          wx:for="{{categories}}"
          wx:key="_id"
          bindtap="selectCategory"
          data-id="{{item._id}}"
        >
          {{item.name}}
        </view>
      </view>
    </scroll-view>
  </view>

  <view class="album-grid" wx:if="{{filteredAlbums.length > 0}}">
    <view class="album-card" wx:for="{{filteredAlbums}}" wx:key="_id">
      <view class="album-cover-container">
        <image class="album-cover" src="{{item.coverImage}}" mode="aspectFill"></image>
      </view>
      <view class="album-info">
        <view class="album-title">{{item.title}}</view>
        <view class="album-meta">
          <text class="meta-category">{{item.categoryName}}</text>
          <text class="meta-divider">·</text>
          <text class="meta-count">{{item.images.length}} 张</text>
          <text class="meta-divider">·</text>
          <text class="meta-status {{item.isActive ? 'active' : 'inactive'}}">{{item.isActive ? '已启用' : '已禁用'}}</text>
          <text class="meta-divider">·</text>
          <text class="meta-featured {{item.isFeatured ? 'featured' : ''}}">{{item.isFeatured ? '精选' : '普通'}}</text>
        </view>
      </view>
      <view class="album-actions">
        <view class="action-icon edit" bindtap="editAlbum" data-id="{{item._id}}">□</view>
        <view class="action-icon delete" bindtap="deleteAlbum" data-id="{{item._id}}">×</view>
      </view>
    </view>
  </view>

  <view class="empty-container" wx:else>
    <view class="empty-icon">□</view>
    <view class="empty-text">暂无作品集</view>
  </view>
</view>
