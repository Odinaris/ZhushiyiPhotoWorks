<view class="admin-page">
  <view class="page-header">
    <view class="header-title">åˆ†ç±»ç®¡ç†</view>
    <button class="add-btn" bindtap="addCategory">+ æ·»åŠ </button>
  </view>

  <view class="list" wx:if="{{categories.length > 0}}">
    <view class="list-item" wx:for="{{categories}}" wx:key="_id">
      <view class="item-info">
        <view class="item-name">{{item.name}}</view>
        <view class="item-meta">
          <text>åºå·: {{item.order}}</text>
          <text class="divider">Â·</text>
          <text>ä½œå“æ•°: {{item.albumCount || 0}}</text>
          <text class="divider">Â·</text>
          <text class="{{item.isActive ? 'active' : 'inactive'}}">{{item.isActive ? 'å·²å¯ç”¨' : 'å·²ç¦ç”¨'}}</text>
        </view>
      </view>
      <view class="item-actions">
        <button class="action-btn edit" bindtap="editCategory" data-item="{{item}}">ç¼–è¾‘</button>
        <button class="action-btn delete" bindtap="deleteCategory" data-id="{{item._id}}">åˆ é™¤</button>
      </view>
    </view>
  </view>

  <view class="empty-container" wx:else>
    <view class="empty-icon">ğŸ·ï¸</view>
    <view class="empty-text">æš‚æ— åˆ†ç±»</view>
  </view>
</view>

<view class="modal {{showModal ? 'show' : ''}}" catchtap="closeModal">
  <view class="modal-content" catchtap="stopPropagation">
    <view class="modal-title">{{modalTitle}}</view>
    
    <view class="form-item">
      <view class="form-label">åˆ†ç±»åç§°</view>
      <input class="form-input" value="{{formData.name}}" bindinput="onInputChange" data-field="name" placeholder="è¯·è¾“å…¥åˆ†ç±»åç§°"/>
    </view>

    <view class="form-item">
      <view class="form-label">æ’åº</view>
      <input class="form-input" type="number" value="{{formData.order}}" bindinput="onInputChange" data-field="order" placeholder="è¯·è¾“å…¥æ’åºåºå·"/>
    </view>

    <view class="form-item">
      <view class="form-label">çŠ¶æ€</view>
      <switch checked="{{formData.isActive}}" bindchange="onSwitchChange" data-field="isActive"/>
    </view>

    <view class="modal-actions">
      <button class="modal-btn cancel" bindtap="closeModal">å–æ¶ˆ</button>
      <button class="modal-btn confirm" bindtap="saveCategory">ä¿å­˜</button>
    </view>
  </view>
</view>
