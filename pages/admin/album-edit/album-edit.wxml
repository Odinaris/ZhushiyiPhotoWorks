<view class="edit-page">
  <!-- Loading Overlay -->
  <view class="loading-overlay {{isLoading ? 'show' : ''}}" wx:if="{{isLoading}}">
    <view class="loading-spinner"></view>
    <text class="loading-text">{{loadingText}}</text>
  </view>

  <view class="form-section">
    <view class="form-item">
      <view class="form-label">作品集标题</view>
      <input class="form-input" value="{{formData.title}}" bindinput="onInputChange" data-field="title" placeholder="请输入作品集标题"/>
    </view>

    <view class="form-item">
      <view class="form-label">作品集描述</view>
      <textarea class="form-textarea" value="{{formData.description}}" bindinput="onInputChange" data-field="description" placeholder="请输入作品集描述" maxlength="200"></textarea>
    </view>

    <view class="form-item">
      <view class="form-label">所属分类</view>
      <picker mode="selector" range="{{categories}}" range-key="name" value="{{categoryIndex}}" bindchange="onCategoryChange">
        <view class="picker">{{categories[categoryIndex].name || '请选择分类'}}</view>
      </picker>
    </view>

    <view class="form-item">
      <view class="form-label">封面图片</view>
      <view class="image-upload" bindtap="chooseCover">
        <image wx:if="{{formData.coverImage}}" class="upload-preview" src="{{formData.coverImage}}" mode="aspectFill"></image>
        <view wx:else class="upload-placeholder">
          <text class="upload-icon">+</text>
          <text class="upload-text">选择封面</text>
        </view>
      </view>
    </view>

    <view class="form-item">
      <view class="form-label">作品图片</view>
      <view class="images-grid">
        <view class="grid-item" wx:for="{{formData.images}}" wx:key="index">
          <image class="grid-image" src="{{item.url}}" mode="aspectFill"></image>
          <view class="grid-delete" bindtap="deleteImage" data-index="{{index}}">×</view>
        </view>
        <view class="grid-item add-item" bindtap="chooseImages">
          <text class="add-icon">+</text>
          <text class="add-text">添加图片</text>
        </view>
      </view>
    </view>

    <view class="form-item">
      <view class="form-label-inline">
        <text>是否精选</text>
        <switch checked="{{formData.isFeatured}}" bindchange="onSwitchChange" data-field="isFeatured"/>
      </view>
    </view>

    <view class="form-item">
      <view class="form-label-inline">
        <text>是否启用</text>
        <switch checked="{{formData.isActive}}" bindchange="onSwitchChange" data-field="isActive"/>
      </view>
    </view>

    <view class="form-item">
      <view class="form-label">排序</view>
      <input class="form-input" type="number" value="{{formData.order}}" bindinput="onInputChange" data-field="order" placeholder="排序序号"/>
    </view>
  </view>

  <view class="form-actions">
    <button class="action-btn cancel" bindtap="goBack">取消</button>
    <button class="action-btn save" bindtap="saveAlbum">保存</button>
  </view>
</view>
