<view class="detail-container">
  <!-- å¤´éƒ¨ä¿¡æ¯ -->
  <view class="detail-header">
    <view class="header-content">
      <view class="header-left">
        <view class="album-title">{{album.title}}</view>
        <view class="album-info">
          <text class="info-item">{{album.categoryName}}</text>
          <text class="info-divider">Â·</text>
          <text class="info-item">{{album.images.length}}å¼ ç…§ç‰‡</text>
          <text class="info-divider">Â·</text>
          <text class="info-item">{{album.viewCount || 0}}æ¬¡æµè§ˆ</text>
        </view>
        <view class="album-description" wx:if="{{album.description}}">{{album.description}}</view>
      </view>
      <!-- è§†å›¾åˆ‡æ¢æŒ‰é’® -->
      <view class="view-toggle">
        <button class="view-mode-btn" bindtap="toggleViewMode">
          <text class="view-icon">{{viewMode === 'grid' ? 'âŠ' : 'â˜°'}}</text>
        </button>
      </view>
    </view>
  </view>

  <!-- å›¾ç‰‡å±•ç¤ºåŒºåŸŸ -->
  <view class="images-container">
    <!-- ç€‘å¸ƒæµæ¨¡å¼ - åŒæ  -->
    <view class="images-grid grid" wx:if="{{viewMode === 'grid'}}">
      <view class="waterfall-column" wx:for="{{2}}" wx:key="index" wx:for-item="colIndex">
        <view 
          class="image-item"
          wx:for="{{album.images}}"
          wx:key="index"
          wx:for-index="imgIndex"
          wx:if="{{imgIndex % 2 === colIndex}}"
          bindtap="previewImage"
          data-index="{{imgIndex}}"
        >
          <image 
            class="item-image" 
            src="{{item.url}}" 
            mode="widthFix" 
            lazy-load
            bindload="onImageLoad"
            data-index="{{imgIndex}}"
            style="height: {{imageHeights[imgIndex] || 300}}rpx"
          ></image>
          <view class="image-desc" wx:if="{{item.description}}">{{item.description}}</view>
        </view>
      </view>
    </view>
    
    <!-- å•æ æ¨¡å¼ -->
    <view class="images-grid list" wx:else>
      <view 
        class="image-item"
        wx:for="{{album.images}}"
        wx:key="index"
        bindtap="previewImage"
        data-index="{{index}}"
      >
        <image 
          class="item-image" 
          src="{{item.url}}" 
          mode="widthFix" 
          lazy-load
          bindload="onImageLoad"
          data-index="{{index}}"
          style="height: {{imageHeights[index] || 300}}rpx"
        ></image>
        <view class="image-desc" wx:if="{{item.description}}">{{item.description}}</view>
      </view>
    </view>
  </view>

  <!-- åˆ†äº«æŒ‰é’® -->
  <view class="share-section">
    <button class="share-btn" open-type="share">
      <text class="share-icon">ğŸ“¤</text>
      <text>åˆ†äº«ç»™å¥½å‹</text>
    </button>
  </view>

  <!-- åŠ è½½çŠ¶æ€ -->
  <view class="loading-container" wx:if="{{loading}}">
    <text>åŠ è½½ä¸­...</text>
  </view>
  <view class="error-container" wx:if="{{!loading && loadError}}">
    <text>åŠ è½½å¤±è´¥</text>
    <button bindtap="onRetry">é‡è¯•</button>
  </view>

  <!-- ç©ºçŠ¶æ€ -->
  <view class="empty-container" wx:if="{{!loading && !album._id}}">
    <view class="empty-icon">ğŸ“·</view>
    <view class="empty-text">ä½œå“é›†ä¸å­˜åœ¨</view>
  </view>
</view>
