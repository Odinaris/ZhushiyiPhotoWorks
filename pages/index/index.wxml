<view class="index-container">
  <!-- Loading Overlay -->
  <view class="loading-overlay {{isLoading ? 'show' : ''}}" wx:if="{{isLoading}}">
    <view class="loading-spinner"></view>
    <text class="loading-text">{{loadingText}}</text>
  </view>

  <!-- Hero Banner -->
  <view class="hero-section">
    <swiper 
      class="hero-swiper" 
      indicator-dots="{{true}}"
      autoplay="{{true}}"
      interval="{{5000}}"
      duration="{{800}}"
      circular="{{true}}"
      indicator-color="rgba(255, 255, 255, 0.3)"
      indicator-active-color="#FFFFFF"
    >
      <swiper-item wx:for="{{banners}}" wx:key="_id" bindtap="onBannerTap" data-item="{{item}}">
        <image class="hero-image" src="{{item.imageUrl}}" mode="aspectFill" lazy-load></image>
      </swiper-item>
    </swiper>
  </view>

  <!-- Categories -->
  <view class="categories-section">
    <view class="section-header">
      <view class="section-title">作品分类</view>
      <view class="section-subtitle">Categories</view>
    </view>
    <scroll-view 
      class="categories-scroll" 
      scroll-x="{{true}}" 
      show-scrollbar="{{false}}"
      enable-flex="{{true}}"
    >
      <view class="categories-list">
        <view 
          class="category-item" 
          wx:for="{{categories}}" 
          wx:key="_id"
          bindtap="goToCategoryAlbums"
          data-category="{{item}}"
        >
          <view class="category-image-container">
            <image class="category-cover" src="{{item.coverImage || '/images/tab-album.png'}}" mode="aspectFill" binderror="onCategoryCoverError" data-category="{{item}}"></image>
          </view>
          <view class="category-name">{{item.name}}</view>
        </view>
      </view>
    </scroll-view>
  </view>

  <!-- Featured Works -->
  <view class="featured-section">
    <view class="section-header">
      <view class="section-title">精选作品</view>
      <view class="section-subtitle">Featured Works</view>
    </view>

    <view class="album-grid" wx:if="{{featuredAlbums.length > 0}}">
      <view 
        class="album-card" 
        wx:for="{{featuredAlbums}}" 
        wx:key="_id"
        bindtap="goToAlbumDetail"
        data-id="{{item._id}}"
      >
        <view class="album-image-container">
          <image class="album-cover" src="{{item.coverImage}}" mode="aspectFill" lazy-load></image>
          <view class="album-overlay">
            <view class="album-overlay-content">
              <view class="album-title">{{item.title}}</view>
              <view class="album-meta">
                <view class="album-category">{{item.categoryName}}</view>
                <view class="album-count">{{item.images.length}} 张</view>
              </view>
            </view>
          </view>
        </view>
      </view>
    </view>

    <view class="empty-container" wx:else>
      <view class="empty-icon">□</view>
      <view class="empty-text">暂无精选作品</view>
    </view>

    <!-- View All Button -->
    <view class="view-all-container">
      <button class="view-all-button" bindtap="goToAllAlbums">查看全部作品</button>
    </view>
  </view>

  <!-- Loading State -->
  <view class="loading-container" wx:if="{{loading}}">
    <view class="loading-spinner"></view>
    <text class="loading-text">加载中...</text>
  </view>

  <!-- Error State -->
  <view class="error-container" wx:if="{{!loading && loadError}}">
    <view class="empty-icon">⚠</view>
    <text class="error-text">加载失败</text>
    <button class="btn-secondary" bindtap="onRetry">重试</button>
  </view>
</view>